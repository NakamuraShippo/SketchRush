![SketchRushLogo](https://github.com/NakamuraShippo/SketchRush/blob/main/image/SketchRushLogo.png)
  
[English Readme](https://github.com/NakamuraShippo/SketchRush/blob/main/Readme_EN.md)  
  
## 概要
SketchRushは、シンプルなドローツールです。  
ペンタブレットやマウスを使用して、素早くスケッチやアイデアを形にすることができます。 
30秒ドローイング、マスク、ポーズの描画等、高度な編集を要さない用途に向いています。  
[youtubeにデモ動画を上げました](https://youtu.be/DLPtTu0L4a0)  
  
## 主な機能
- フォルダ内の画像を順次表示  
- 読み込み対応形式 png gif bmp jpeg jpg webp  
- マウスを使用したドローイング  
- ペンタブレットを使用したドローイング  
- パスツール(B-Spline)/ペンツール
- ペン色の変更  
- 背景色の変更  
- 描画内容の保存（透明背景のPNG）  
- 背景画像と結合した画像の保存  
- 保存時に自動で次の画像に遷移  
- キーボードショートカットのカスタム  
  
## インストール方法
このリポジトリをクローンまたはダウンロードします。  
Python 3.6以上がインストールされていることを確認します。  
  
解凍したフォルダ内にあるinstall_SketchRush.batをダブルクリックするとインストールを開始します。  
~~~
#手動でもインストール可能です。
python -m venv venv
venv\Scripts\Activate
pip install PyQt5 Pillow PyYAML scipy shapely numpy
~~~
boot_SketchRush.batをダブルクリックすると起動します。  
~~~
#手動で起動することもできます。
venv\Scripts\Activate
py main.py
~~~
  
## 使用方法
### マウスモード  
- 左クリックで描画します。  
- 右クリックを押している間は消しゴムモードになります。  
- マウスホイールでペンサイズを調整できます。  
- ペンの色は設定した色にC(順送り)とV(逆順送り)で変更できます
  
### パスモード
- パスはB-Splineを採用しています。
- マウス左ボタンドラッグで描画します。(ボタンを離すとパスが確定します)
- Qキー(デフォルト時)で選択モードに切り替えると確定したパスを選択できます。
  - 選択範囲内をドラッグするとパスの移動ができます。
  - パスを選択すると制御点が表示され、ドラッグすると線分の形状を変化させる事ができます。
  - CTRL(変更可)+左クリックで制御点を追加できます。
  - ALT(変更可)+左クリックで制御点を削除できます。

### ペンタブレットモード
消しゴムツールはペンタブレットの消しゴムツール、またはEキー(変更可)で使用できます。  
それ以外の操作はマウスモードと同じです。  

## 設定
### 基本設定
![keyboardSCR](https://github.com/NakamuraShippo/SketchRush/blob/main/image/BasicSetting.png)  
- 保存するファイル名:[:03d]と「.png」の部分は必ず保存名に含むようにしてください。(画像の例で保存されると、SketchRush001.pngとなります)  
- 背景の色:画像を読み込まない時の背景色  
- キャンバスサイズ:画像を読み込まない場合のキャンバスサイズ、幅・高さを指定  
- ペンタブレットモード:ペンタブレットの有効/無効  
- 保存時、自動的に画像を進める:保存時の処理の有効/無効  
- 言語:言語設定  
- ペンの色:「ペンの色を追加」「選択した色を削除」でペンの色を追加したり削除したりできます。各色をクリックすると設定されている色の変更ができます。  
- 手描き補正の強度:ペンツールの手ブレ補正の強度です。
- 削除モード:「全体を消去」キーを押した時の挙動を設定します。
- 保存モード:「画像を保存」キーを押した時の挙動を設定します。
- パスの単純化補正:パスを確定するときに行うパスの単純化補正処理の強度です。
  - 高い程パスの制御点が少なくなり処理が軽くなります。
- パスのスムージング補正:パスを確定する時に行うパスのスムージング補正の強度です。
  - 高い程パスの曲線補正が強くなります。最大まで上げると制御が難しくなります。
- パス選択の当たり判定範囲:パスの当たり判定調整です。
  - 高くなるほど選択しやすくなります。最低だと選択しにくいので、10以上を推奨します。

### キーコンフィグ
![keyboardSCR](https://github.com/NakamuraShippo/SketchRush/blob/main/image/KeyConfig.png)    
#### ショートカットキー
| 機能 | キー |
|:---------------|------|
アンドゥ（Undo）| Z 
リドゥ（Redo）|	X
キャンバスのクリア |	Delete
次のペンの色	| C
前のペンの色	| V
保存 | S 
次の画像	| → （右矢印キー）
前の画像	| ← （左矢印キー）
消しゴムツール	| E
ペンサイズを大きく | +
ペンサイズを小さく | -
背景画像と結合して保存 | F1
ツールの切替 | Tab
塗りつぶし切替(パスツール) | F
パスモード時に選択/描画を切替 | Q
  
#### マウスの設定
| 機能 | キー |
|:---------------|------|
ペンツール | 左クリック
消しゴムツール(押している間有効) | 右クリック
ペンサイズを大きく | マウスホイール上回転
ペンサイズを小さく | マウスホイール下回転

#### パスツール用の修飾キー
| 機能 |キー |
|:---------------|------|
制御点追加 | CTRL
制御点削除 | ALT

## 更新履歴
2024.9.27:v1.0公開 見切り発車なのでバグがあるかも  
2024.10.16:v1.1 手ブレ補正、パスツール追加  
  
## 今後の予定(未定)
- ComfyUI APIを経由してペイントした内容をLoad Image系のノードに送信し生成する機能  
- ツール上でプロンプトを記述しComfyUIに送信してSketchRush上で生成する機能  
  
## ライセンス
SketchRushは、GNU General Public License version 3 (GPLv3) の下でライセンスされています。  
GPLv3ライセンスに基づき、以下の権利が付与されます：  
- 複製と配布: このソフトウェアを自由に複製し、配布することができます。  
- 改変: ソースコードを改変し、再配布することができます。ただし、改変したバージョンもGPLv3の下で公開する必要があります。  
- 商用利用: このソフトウェアを商用目的で使用することができます。
  
## 免責事項  
このソフトウェアは「現状のまま」提供されており、特定の目的への適合性や非侵害性を含む、明示または黙示のいかなる保証もありません。ツールの利用者は自己責任で使用してください。ツール製作者（なかむらしっぽ）は、その使用によって生じるいかなる結果についても責任を負いません。  
  
## 著作権  
Copyright (C) 2024年 なかむらしっぽ  
このプログラムはフリーソフトウェアです。  
使用者はこれを再配布および/または改変することができますが、その場合にはGNU General Public License version 3（GPLv3）の条項に従わなければなりません。  
  
## 連絡先
バグや要望、連絡などがあればissueまたは以下のポータルからSNSやメール等からお気軽にお声掛けください。  
なかむらしっぽ / https://lit.link/nakamurashippo
